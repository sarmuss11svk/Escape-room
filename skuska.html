<!DOCTYPE html>
<html lang="sk">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Miestnos≈• 2 ‚Äì Python √öloha (bubliny fix)</title>
<style>
  html, body { height:auto; min-height:100%; overflow-y:auto; }

  body {
    margin:0; padding:0;
    font-family:'Segoe UI',Arial,sans-serif;
    background:url('imageroom2.jpg') no-repeat center center fixed;
    background-size:cover;
    color:#f0f5ff;
    display:flex; justify-content:center; align-items:flex-start;
    min-height:100vh;
  }

  #centerbox {
    margin:60px 20px 140px;
    padding:0 40px 40px;
    max-width:760px; width:100%;
    text-align:center;
  }

  h1{font-size:2.4rem;margin-bottom:14px;color:#fff;text-shadow:0 0 10px #0008;}
  h3{font-size:1.2rem;margin:2px 0 26px;color:#ade8ff;text-shadow:0 0 10px #065a8aaa;}

  pre{
    background:#0b0b0bdd;
    padding:22px 5vw;
    border-radius:12px;
    color:#81c0ff;
    font-family:'Fira Mono',monospace;
    font-size:1.05rem;
    white-space:pre-wrap;
    margin-bottom:18px;
    box-shadow:0 0 16px #1e90ff88 inset;
    text-align:left;
  }

  .slot{
    display:inline-flex; align-items:center; justify-content:center;
    min-width:130px; max-width:160px;
    min-height:26px; vertical-align:baseline;
    padding:2px 4px; margin:0 3px 2px;
    background:#f4e9d7; color:#222;
    border-radius:6px; border:1px solid #e6d7be;
    box-shadow:0 2px 0 rgba(0,0,0,.22) inset,0 0 7px rgba(255,244,225,.22);
    font-size:.9rem;
    text-align:center;
  }
  .slot.filled{outline:2px solid rgba(255,255,255,.22)}
  .slot.good{box-shadow:0 0 0 2px #27d38f inset}
  .slot.bad{box-shadow:0 0 0 2px #ff6b81 inset}

  .tray{
    margin-top:10px;
    background:#0b1733cc;
    border:1px solid #3b4e7a88;
    border-radius:14px;
    padding:10px;
    box-shadow:0 8px 24px #09193177 inset,0 6px 18px #09193166;
  }
  .tray h4{margin:4px 0 10px;font-weight:700;color:#c8ddff;text-shadow:0 0 8px #1e90ff55;}
  .chips{
    display:flex; flex-wrap:wrap; gap:10px; justify-content:center;
  }
  .chip{
    background:#15254f; color:#e9f4ff;
    border:1px solid rgba(255,255,255,.18);
    padding:8px 12px;
    border-radius:12px;
    white-space:normal;
    max-width:95%;
    word-wrap:break-word;
    text-align:center;
    box-shadow:0 8px 22px rgba(0,0,0,.45),0 0 10px rgba(183,207,255,.18);
    cursor:grab; user-select:none;
    transition:transform .15s ease,opacity .15s ease;
    font-family:ui-monospace,Consolas,monospace;
    font-size:.9rem;
  }
  .chip:hover{transform:scale(1.05)}
  .chip:active{cursor:grabbing}

  .btn-row{margin-top:18px;display:flex;justify-content:center;gap:18px;flex-wrap:wrap;}
  button{
    padding:12px 38px;font-size:1.1rem;border-radius:26px;
    background:linear-gradient(135deg,#75aaff,#3f6dd6);
    border:none;color:#e5e5e5;font-weight:700;
    box-shadow:0 6px 18px #5c7bd0cc;
    cursor:pointer;transition:background .3s,box-shadow .3s;
  }
  button:hover{background:linear-gradient(135deg,#4a75d8,#1751bc);box-shadow:0 10px 32px #1f3ddb88;}
  a#next-button{
    display:none;padding:12px 38px;font-size:1.1rem;border-radius:26px;
    background:linear-gradient(135deg,#ff6b6b,#ff8686);
    color:#fff;box-shadow:0 8px 24px #e54f4f;text-decoration:none;
  }
  a#next-button:hover{background:linear-gradient(135deg,#ff4444,#ff5757);box-shadow:0 10px 36px #d81717;}

  #result-message.success{color:#59eb92;font-weight:700;font-size:1.14rem;margin:12px 0 8px;letter-spacing:.6px;text-shadow:0 0 10px #4ace83;}
  #result-message.fail{color:#ff5f5f;font-weight:700;font-size:1.14rem;margin:12px 0 8px;letter-spacing:.6px;text-shadow:0 0 5px #ff3a3a;}

  #timer{
    position:fixed;bottom:20px;right:40px;
    background:#142853dd;padding:12px 30px;border-radius:18px;
    color:#c6d8ff;font-size:1.2rem;font-weight:700;letter-spacing:2px;
    box-shadow:0 8px 20px #09193177;user-select:none;z-index:10;
  }
</style>
</head>
<body>
  <div id="centerbox">
    <h1>üõ∞Ô∏è Miestnos≈• 2 ‚Äì Python √öloha</h1>
    <h3>Potiahni spr√°vne bubliny do pr√°zdnych miest v k√≥de (teraz sa zmestia üòâ).</h3>

<pre>
# üöÄ Simul√°tor letu ‚Äì dopl≈à ch√Ωbaj√∫ce ƒçasti
<span class="slot" data-slot="s1"></span>   # modul na ƒçakanie
import random

def simulacia(meno, kroky):
    palivo = 100
    rychlost = 1.0
    pozicia = 0
    print(f"üöÄ Loƒè {{meno}} ≈°tartuje...")
    time.sleep(1)

    for krok in range(1, kroky + 1):
        if palivo <= 0:
            print(<span class="slot" data-slot="s2"></span>)  # hl√°≈°ka pri nedostatku paliva
            break

        pozicia += rychlost
        palivo -= random.randint(5, 15)
        <span class="slot" data-slot="s3"></span>
        if udalost == "mal√Ω meteor":
            rychlost -= 0.2
        <span class="slot" data-slot="s4"></span>
            rychlost -= 0.5
        else:
            <span class="slot" data-slot="s5"></span>

        if rychlost &lt; 0.5:
            rychlost = 0.5

    return pozicia
</pre>

    <div class="tray">
      <h4>üß© Bubliny:</h4>
      <div class="chips" id="chips"></div>
    </div>

    <div id="result-message" aria-live="polite"></div>

    <div class="btn-row">
      <button id="check-answer">Skontrolova≈• odpoveƒè</button>
      <button id="reset-board">Reset</button>
      <a href="room3/room3.html" id="next-button">ƒéalej</a>
    </div>
  </div>

  <div id="timer">30:00</div>

<script>
const EXPECT = {
  s1: 'import time',
  s2: '"\\n‚ùå Palivo do≈°lo! Loƒè je v n√∫dzovom re≈æime."',
  s3: 'udalost = random.choice(["niƒç sa nedeje","mal√Ω meteor","ionov√° b√∫rka","n√°jden√© palivo","sign√°l z plan√©ty"])',
  s4: 'elif udalost == "ionov√° b√∫rka":',
  s5: 'print("üåå Pokojn√Ω let vesm√≠rom...")'
};
const TOKENS = Object.values(EXPECT);

/* timer */
(function(){
  let timeLeft=30*60;
  const t=document.getElementById('timer');
  const s=localStorage.getItem('escape_timer');
  if(s&&!isNaN(parseInt(s))) timeLeft=parseInt(s);
  setInterval(()=>{
    const m=Math.floor(timeLeft/60),sec=timeLeft%60;
    t.textContent=`${m.toString().padStart(2,'0')}:${sec.toString().padStart(2,'0')}`;
    timeLeft=Math.max(0,timeLeft-1);
    localStorage.setItem('escape_timer',timeLeft);
  },1000);
})();

/* chips render */
const chipsBox=document.getElementById('chips');
function makeChip(txt){
  const ch=document.createElement('div');
  ch.className='chip'; ch.textContent=txt; ch.draggable=true; ch.dataset.val=txt;
  ch.addEventListener('dragstart',e=>{e.currentTarget.style.opacity='0.8';e.dataTransfer.setData('text/plain',txt);window._dragSrc=e.currentTarget;});
  ch.addEventListener('dragend',e=>{e.currentTarget.style.opacity='1';window._dragSrc=null;});
  return ch;
}
function renderChips(){chipsBox.innerHTML='';TOKENS.forEach(t=>chipsBox.appendChild(makeChip(t)));}
renderChips();

/* drag slots */
const slots=Array.from(document.querySelectorAll('.slot'));
function setStatus(txt,kind){
  const el=document.getElementById('result-message');
  el.textContent=txt; el.className=kind||'';
}
slots.forEach(s=>{
  s.addEventListener('dragover',e=>{e.preventDefault();s.classList.add('filled');});
  s.addEventListener('dragleave',()=>{if(!s.querySelector('.chip'))s.classList.remove('filled');});
  s.addEventListener('drop',e=>{
    e.preventDefault();
    const src=window._dragSrc;if(!src)return;
    const old=s.querySelector('.chip');
    if(old)chipsBox.appendChild(old);
    s.appendChild(src);
    s.classList.add('filled');s.classList.remove('good','bad');
    setStatus('Bublina vlo≈æen√°.');
  });
});

/* check + reset */
const checkBtn=document.getElementById('check-answer');
const resetBtn=document.getElementById('reset-board');
const nextBtn=document.getElementById('next-button');
checkBtn.onclick=()=>{
  let ok=true;
  slots.forEach(s=>{
    const need=EXPECT[s.dataset.slot];
    const got=s.querySelector('.chip')?.dataset.val||'';
    if(got===need){s.classList.add('good');s.classList.remove('bad');}
    else{s.classList.add('bad');s.classList.remove('good');ok=false;}
  });
  if(ok){setStatus('Spr√°vne! M√¥≈æe≈° pokraƒçova≈• ƒèalej.','success');checkBtn.style.display='none';nextBtn.style.display='inline-block';}
  else setStatus('Niektor√Ω slot nesed√≠. Skontroluj ƒçerven√© miesta.','fail');
};
resetBtn.onclick=()=>{
  slots.forEach(s=>{
    const c=s.querySelector('.chip');
    s.classList.remove('filled','good','bad');
    if(c)chipsBox.appendChild(c);
  });
  setStatus('');
  checkBtn.style.display='inline-block';
  nextBtn.style.display='none';
};
</script>
</body>
</html>


